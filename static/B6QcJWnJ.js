import{_ as E,t as a,v as i,y as c,r as p,a as q,i as F,o as P,J as Y,x as e,K as S,L as j,M as x,N as L,O as I,z as V,P as K,Q,R as $,B as z}from"./CV3SWdNv.js";import{Y as R,a as G}from"./CvQfod4X.js";const W={__name:"MapButtonBack",props:{label:{type:String,default:"ÊåâÈàï"},onClick:{type:Function,required:!0}},setup(h){return(M,r)=>(a(),i("button",{class:"map-control-button",onClick:r[0]||(r[0]=(...b)=>h.onClick&&h.onClick(...b))},c(h.label),1))}},X=E(W,[["__scopeId","data-v-c2688520"]]),ee={key:0,id:"mainClose",width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},te={key:1,id:"mainOpen",width:"10",height:"15",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le={class:"content"},se={class:"filter-section"},ne={class:"filter-zoom"},oe=["value","onUpdate:modelValue"],ae={class:"filter-section"},ie={class:"filter-zoom"},re=["value","onUpdate:modelValue"],ue={class:"main-content"},de={key:0},ce={class:"video-grid"},ve=1,pe={__name:"index",setup(h){const M=[{id:"kjWQ_ticmtc"},{id:"bqZk6C9tLS0"},{id:"oLD5y2rSpvs"},{id:"VK70IvJN1iA"}],r=p(!1),b=()=>{r.value=!r.value},m=p(!0),H=()=>{m.value=!m.value},o=p({hashtag:[],diveStyle:[]}),D=p([]),B=p([]),{$googleMaps:O,$createMarkerClusterer:T}=q(),u=p(null),A={lat:0,lng:0};let v=null,w=null,C=[];const N=d=>{o.value[d]&&(o.value[d]=[],g())},J=F(()=>!u.value||!u.value.hashtag?"":JSON.parse(u.value.hashtag.replace(/'/g,'"')).map(t=>`#${t}`).join(" "));P(async()=>{const{maps:d,marker:t}=await O.importLibraries(),{Map:l}=d,s=await $fetch("https://divespot.info/api/spot_info/").catch(_=>(console.error("Error fetching spot info:",_),null));if(!s)return;C=s;const n=[],k=[];C.forEach(_=>{const U=JSON.parse(_.hashtag.replace(/'/g,'"'));n.push(...U);const Z=_.dive_style.split(",");k.push(...Z)}),D.value=[...new Set(n)],B.value=[...new Set(k)],v=new l(document.getElementById("map"),{center:A,zoom:ve,mapId:"7c640828dc89fd38"}),g();const f=document.createElement("div");Y(X,{label:"ÂõûÂà∞È†êË®≠‰ΩçÁΩÆ",onClick:()=>{v.setCenter({lat:0,lng:0}),v.setZoom(1)}}).mount(f),v.controls[google.maps.ControlPosition.TOP_RIGHT].push(f)});const g=()=>{const d=C.filter(l=>{const s=JSON.parse(l.hashtag.replace(/'/g,'"')),n=l.dive_style.split(","),k=o.value.hashtag.length===0||o.value.hashtag.some(y=>s.includes(y)),f=o.value.diveStyle.length===0||o.value.diveStyle.some(y=>n.includes(y));return k&&f});w&&(console.log("Up clusterer"),w.clearMarkers());const t=d.map(l=>{const s=document.createElement("div");s.style.textAlign="center",s.innerHTML=`
      <div style="font-size: 24px; color: blue;">üìç</div>
      <div style="font-size: 14px; color: black; margin-top: 4px;">${l.name}</div>
    `;const n=new google.maps.marker.AdvancedMarkerElement({map:v,position:{lat:l.geo_lat,lng:l.geo_lon},title:l.name});return n.addListener("click",()=>{u.value=l}),n});w=T(v,t)};return(d,t)=>(a(),i("div",{class:I(["container root",{dark:m.value}])},[e("div",{class:I(["sidebar",{collapsed:r.value}])},[e("button",{class:"toggle-button",onClick:b},[r.value?(a(),i("svg",ee,t[2]||(t[2]=[e("path",{d:"M5.83357 6.625L-2.19345e-05 1.47199L1.66638 -9.53674e-07L9.16638 6.625L1.66638 13.25L-2.19345e-05 11.778L5.83357 6.625Z",fill:"white"},null,-1)]))):(a(),i("svg",te,t[3]||(t[3]=[e("path",{d:"M3.33281 7.5L9.1664 13.3336L7.5 15L0 7.5L7.5 0L9.1664 1.6664L3.33281 7.5Z",fill:"white"},null,-1)])))]),S(e("div",le,[t[6]||(t[6]=e("h1",null,"Dive Spot",-1)),e("button",{class:"theme-toggle",onClick:H},c(m.value?"üåï Light":"üåë Dark"),1),t[7]||(t[7]=e("hr",null,null,-1)),e("div",se,[t[4]||(t[4]=e("h4",null,"Hashtag",-1)),e("div",ne,[(a(!0),i(x,null,L(D.value,(l,s)=>(a(),i("div",{key:s},[e("label",null,[S(e("input",{type:"checkbox",value:l,"onUpdate:modelValue":n=>o.value.hashtag=n,onChange:g},null,40,oe),[[$,o.value.hashtag]]),z(" "+c(l),1)])]))),128))]),e("button",{onClick:t[0]||(t[0]=l=>N("hashtag"))},"Ê∏ÖÈô§")]),t[8]||(t[8]=e("hr",null,null,-1)),e("div",ae,[t[5]||(t[5]=e("h4",null,"Dive Style",-1)),e("div",ie,[(a(!0),i(x,null,L(B.value,(l,s)=>(a(),i("div",{key:s},[e("label",null,[S(e("input",{type:"checkbox",value:l,"onUpdate:modelValue":n=>o.value.diveStyle=n,onChange:g},null,40,re),[[$,o.value.diveStyle]]),z(" "+c(l),1)])]))),128))]),e("button",{onClick:t[1]||(t[1]=l=>N("diveStyle"))},"Ê∏ÖÈô§")])],512),[[j,!r.value]])],2),e("div",ue,[t[9]||(t[9]=e("div",{style:{position:"relative"}},[e("div",{id:"map",style:{height:"500px",width:"100%","margin-bottom":"20px"}})],-1)),u.value?(a(),i("div",de,[e("h1",null,c(u.value.name),1),e("p",null,c(u.value.description),1),e("div",null,[e("div",ce,[(a(),i(x,null,L(M,l=>V(R,{key:l.id,videoId:l.id},null,8,["videoId"])),64))]),V(G)]),e("p",null,c(K(J)),1),e("p",null,"Dive Style: "+c(u.value.dive_style),1)])):Q("",!0)])],2))}},ge=E(pe,[["__scopeId","data-v-9d6889e6"]]);export{ge as default};
